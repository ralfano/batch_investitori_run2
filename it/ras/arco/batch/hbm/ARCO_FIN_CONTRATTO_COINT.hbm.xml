<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
                                   "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
 <!-- TABELLA DEI CONTRATTI -->
 <class name="it.ras.arco.bean.FinContratto" table="FIN_CONTRATTO" where="GSTD_ESIST_B='S'">
  <id name="contrattoId" column="CONTRATTO_ID" type="integer">
   <generator class="sequence">
    <param name="sequence">FIN_CONTRATTO_SEQ</param>
   </generator>
  </id>
  <property name="prodottoId" type="integer" column="PRODOTTO_ID"/>
 <!--  <property name="cointestazioneId" type="integer" column="COINTESTAZIONE_ID"/>
  <property name="soggettoPrimoIntId" type="integer" column="SOGGETTO_PRIMO_INT_ID"/>
   -->
  <property name="numContratto" type="string" column="NUM_CONTRATTO_S" length="20"/>
  <property name="dossierTecnico" type="string"
   column="DOSSIER_TECNICO_S" length="20"/>
  <property name="dataApertura" type="date" column="DATA_APERTURA_D"/>
  <property name="tipoProdotto" type="string" column="TIPO_PRODOTTO_T" length="3"/>
  <property name="statoContratto" type="string"
   column="STATO_CONTRATTO_T" length="3"/>
  <property name="codConvenzione" type="string"
   column="COD_CONVENZIONE_S" length="10"/>
  <property name="userUltimaModifica" type="string"
   column="GSTD_ULT_USER_S" length="20"/>
  <property name="proceduraUltimaModifica" type="string"
   column="GSTD_ULT_PROC_S" length="20"/>
  <property name="dataUltimaModifica" type="timestamp" column="GSTD_ULT_MOD_D"/>
  <property name="dataInserimento" type="timestamp" column="GSTD_INSE_D"/>
  <property name="flagEsistenza" type="string" column="GSTD_ESIST_B" length="1"/>
  <property name="utenteInserimento" type="string"
   column="GSTD_USER_INS_S" length="20"/>
  <property name="tipoUltimaModifica" type="string"
   column="GSTD_TIPO_MOD_B" length="1"/>
  <property name="flagMulti" type="string" column="FLAG_MULTI" length="1"/>
  
  <!-- RELAZIONE CON FIN_COINTESTAZIONE-->
  <many-to-one name="cointestazione" class="it.ras.arco.bean.FinCointestazione" 
   column="COINTESTAZIONE_ID" update="true" insert="true"/>
  
  <!-- RELAZIONE CON FIN_SOGGETTO-->
   <many-to-one name="soggetto" class="it.ras.arco.bean.FinSoggetto" 
   column="SOGGETTO_PRIMO_INT_ID" update="true" insert="true"/>
  
  
 
  <!-- RELAZIONE CON LA FIN_PRODOTTO -->
  <many-to-one name="prodotto"
   class="it.ras.arco.bean.FinProdotto" column="PRODOTTO_ID"
   update="false" insert="false"/>
  <!-- RELAZIONE CON LA FIN_INDIRIZZO 
  <set name="indirizzo" table="FIN_CONTRATTO_INDIR" lazy="false"
   cascade="all" where="GSTD_ESIST_B='S'">
   <key column="CONTRATTO_ID"/>
   <composite-element class="it.ras.arco.bean.FinContrattoIndir">
    <parent name="contratto"/>
    <many-to-one name="indirizzo"
     class="it.ras.arco.batch.bean.FinIndirizzo" column="INDIRIZZO_ID" not-null="true"/>
    <property name="tipoIndirizzo" type="string"
     column="TIPO_INDIRIZZO_T" length="3"/>
    <property name="userUltimaModifica" type="string"
     column="GSTD_ULT_USER_S" length="20"/>
    <property name="proceduraUltimaModifica" type="string"
     column="GSTD_ULT_PROC_S" length="20"/>
    <property name="dataInizio" type="date" column="DATA_INIZIO_D"/>
    <property name="dataFine" type="date" column="DATA_FINE_D"/>
    <property name="dataUltimaModifica" type="timestamp" column="GSTD_ULT_MOD_D"/>
    <property name="dataInserimento" type="timestamp" column="GSTD_INSE_D"/>
    <property name="flagEsistenza" type="string" column="GSTD_ESIST_B" length="1"/>
    <property name="utenteInserimento" type="string"
     column="GSTD_USER_INS_S" length="20"/>
    <property name="tipoUltimaModifica" type="string"
     column="GSTD_TIPO_MOD_B" length="1"/>
   </composite-element>
  </set>-->
 
  
 </class>
 
 <query name="GetContrattoByContrattoId">select c from it.ras.arco.bean.FinContratto c where c.contrattoId = ?</query>
 <query name="GetContrattoByNumContratto">select c from it.ras.arco.bean.FinContratto c where c.numContratto = ?</query>
 <query name="GetContrattoByNumContrattoCodInterfaccia">select c from it.ras.arco.bean.FinContratto c 
 join c.prodotto p join p.emittente e join e.interfaccia i where c.numContratto = ? and i.interfaccia = ?</query>
 
 
 

</hibernate-mapping>
