<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
                                   "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
 <!-- TABELLA PROMOTORI -->
 <class name="it.ras.arco.bean.FinPromotore" table="FIN_PROMOTORE" where="GSTD_ESIST_B='S'" batch-size="1">
 
  <id name="promotoreId" column="PROMOTORE_ID" type="integer">
   <generator class="sequence">
    <param name="sequence">FIN_PROMOTORE_SEQ</param>
   </generator>
  </id>
 
  <property name="codPromotore" type="string" column="COD_PROMOTORE_S" length="8"/>
  <property name="desPromotore" type="string" column="DES_PROMOTORE_S" length="50"/>
  <property name="inizioRapporto" type="date" column="INIZIO_RAPPORTO_D"/>
  <property name="fineRapporto" type="date" column="FINE_RAPPORTO_D"/>
  <property name="incarico" type="date" column="INCARICO_D"/>
  <property name="inizioPreavviso" type="date" column="INIZIO_PREAVVISO_D"/>
  <property name="finePreavviso" type="date" column="FINE_PREAVVISO_D"/>
  <property name="fittizio" type="string" column="FITTIZIO_B" length="1"/>
  <property name="dimissioni" type="string" column="DIMISSIONI_B" length="1"/>
  <property name="esperienza" type="string" column="ESPERIENZA" length="3"/>
  <property name="presentatore" type="string" column="PRESENTATORE_S" length="8"/>
  <property name="grado" type="string" column="GRADO_S" length="3"/>
  <property name="naturaRapporto" type="string" column="NATURA_RAPPORTO_S" length="2"/>
  <property name="gradoVendite" type="string" column="GRADO_VENDITE_S" length="2"/>
  <property name="areaVendite" type="string" column="AREA_VENDITE_S" length="3"/>
  <property name="divSgmVendite" type="string" column="DIV_SGM_VENDITE_S" length="8"/>
  <property name="manAmVendite" type="string" column="MAN_AM_VENDITE_S" length="8"/>
  <property name="regRpVendite" type="string" column="REG_RP_VENDITE" length="8"/>
  <property name="sejRgTutorVendite" type="string" column="SEJ_RG_TUTOR_VENDITE_S" length="8"/>
  <property name="aliquotaFiscale" type="string" column="ALIQUOTA_FISCALE_B" length="1"/>
  <property name="iscrizioneEnasarco" type="date" column="ISCRIZIONE_ENASARCO_D"/>
  <property name="codiceEnasarco" type="string" column="CODICE_ENASARCO_S" length="8"/>
  <property name="provinciaCciaaa" type="string" column="PROVINCIA_CCIAAA_T" length="2"/>
  <property name="numeroCciaa" type="string" column="NUMERO_CCIAA_S" length="17"/>
  <property name="mandato" type="string" column="MANDATO_B" length="1"/>
  <property name="certificazione" type="string" column="CERTIFICAZIONE_B" length="1"/>
  <property name="pagamentoProvv" type="string" column="PAGAMENTO_PROVV_B" length="1"/>
  <property name="corriere" type="string" column="CORRIERE_B" length="1"/>
  <property name="codAlbo" type="string" column="COD_ALBO_S" length="8"/>
  <property name="dataInserimentoAlbo" type="date" column="INSERIMENTO_ALBO_D"/>
  <property name="dichiarazDefinitiva" type="string" column="DICHIARAZ_DEFINITIVA_B" length="1"/>
  <property name="codKab" type="string" column="COD_KAB_S" length="5"/>
  <property name="controlloKab" type="string" column="CONTROLLO_KAB_B" length="1"/>
  <property name="codRetePrec" type="string" column="COD_RETE_PREC_T" length="1"/>
  <property name="codRete" type="string" column="COD_RETE_T" length="3"/>
  <property name="codComp" type="string" column="COD_COMP_T" length="3"/>
  <property name="regioneComm" type="string" column="REGIONE_COMM_T" length="3"/>
  <property name="aliqProvvStd" type="integer" column="ALIQ_PROVV_STD_N"/>
  <property name="aliqProvvAssic" type="integer" column="ALIQ_PROVV_ASSIC_N"/>
  <property name="gradoGerarcExt" type="string" column="GRADO_GERARC_EXT_T" length="4"/>
  <property name="descGradoGerarc" type="string" column="DESC_GRADO_GERARC_S" length="50"/>
  <property name="fidoBancario" type="string" column="FIDO_BANCARIO_B" length="1"/>
  <property name="descFiliale" type="string" column="DESC_FILIALE_S" length="40"/>
  <property name="codPfPrincipale" type="string" column="COD_PF_PRINCIPALE_B" length="1"/>
  <property name="dataInizioLegameAgenzia" type="date" column="DATA_INIZIO_LEGAME_AGENZIA_D"/>
  <property name="dataInizioLegameCpf" type="date" column="DATA_INIZIO_LEGAME_CPF_D"/>
  <property name="dataInizioLegameUfficioPersonale" type="date" column="DATA_INIZIO_LEGAME_UFF_PERS_D"/>
  <property name="dataInizioLegameCentroRaccolta" type="date" column="DATA_INIZIO_LEGAME_CEN_RACC_D"/>
  <property name="dataInizioLegameDistretto" type="date" column="DATA_INIZIO_LEGAME_DISTRETTO_D"/>
  <property name="dataInizioLegamePromotorePadre" type="date" column="INIZIO_LEG_PROM_PADRE_D"/>
  <property name="provinciaVendita1" type="string" column="PROVINCIA_VENDITA_1_T" length="2"/>
  <property name="provinciaVendita2" type="string" column="PROVINCIA_VENDITA_2_T" length="2"/>
  <property name="provinciaVendita3" type="string" column="PROVINCIA_VENDITA_3_T" length="2"/>
  <property name="provinciaVendita4" type="string" column="PROVINCIA_VENDITA_4_T" length="2"/>
  <property name="provinciaVendita5" type="string" column="PROVINCIA_VENDITA_5_T" length="2"/>
  <property name="regioneVendita" type="string" column="REGIONE_VENDITA_T" length="2"/>
  <property name="regioneGeografica" type="string" column="REGIONE_GEOGRAFICA_T" length="3"/>
  <property name="dataComunicazioneCessazione" type="date" column="COMUNICAZIONE_CESSAZIONE_D"/>
  <property name="dataProvvisoria" type="date" column="PROVVISORIA_D"/>
  <property name="fl2" type="string" column="FL_2_B" length="1"/>
  <property name="fl3" type="string" column="FL_3_B" length="1"/>
  <property name="fl4" type="string" column="FL_4_B" length="1"/>
  <property name="fl5" type="string" column="FL_5_B" length="1"/>
  <property name="stato" type="string" column="STATO_B" length="1"/>
  <property name="userUltimaModifica" type="string" column="GSTD_ULT_USER_S" length="40"/>
  <property name="proceduraUltimaModifica" type="string" column="GSTD_ULT_PROC_S" length="40"/>
  <property name="dataUltimaModifica" type="timestamp" column="GSTD_ULT_MOD_D"/>
  <property name="dataInserimentoRecord" type="timestamp" column="GSTD_INSE_D"/>
  <property name="flagEsistenza" type="string" column="GSTD_ESIST_B" length="1"/>
  <property name="utenteInserimento" type="string" column="GSTD_USER_INS_S" length="40"/>
  <property name="tipoUltimaModifica" type="string" column="GSTD_TIPO_MOD_B" length="1"/>
  <property name="userUltimaModificaSlave" type="string" column="GSTD_ULT_USER_S" length="40" insert="false" update="false"/>
  <property name="proceduraUltimaModificaSlave" type="string" column="GSTD_ULT_PROC_S" length="40" insert="false" update="false"/>
  <property name="dataUltimaModificaSlave" type="timestamp" column="GSTD_ULT_MOD_D" insert="false" update="false"/>
  <property name="tipoUltimaModificaSlave" type="string" column="GSTD_TIPO_MOD_B" length="1" insert="false" update="false"/>
  <property name="numeroMatricola" type="string" column="NUMERO_MATRICOLA" length="10"/> 
  <property name="dataFineIncarico" type="date" column="DATA_FINE_INCARICO"/> 
  <property name="dataRecessoSindacato" type="date" column="DATA_RECESSO_SINDACATO"/> 
  <property name="qualifica" type="string" column="QUALIFICA" length="2"/> 
  <property name="codiceFiscaleContributivo" type="string" column="COD_FIS_CONTRIB" length="2"/> 
  <property name="flagPcDotazione" type="string" column="FLAG_PC" length="2"/> 
  <property name="provinciaIscrizioneAlbo" type="string" column="PROV_ISCRIZ_ALBO" length="2"/> 
  <property name="modalitaCollocamento" type="string" column="MODALITA_COLLOCAMENTO" length="2"/> 
  <property name="aliquotaProvvigionaleMFee" type="integer" column="ALIQUOTA_PROVV_MFEE"/> 
  <property name="tutor" type="string" column="TUTOR" length="8"/> 
  <property name="dataDimissioni" type="date" column="DATA_DIMISSIONI"/> 
  <property name="anzianitaConvenzionale" type="string" column="ANZIANITA_CONVENZIONALE" length="8"/> 
  <property name="regionalManager" type="string" column="REGIONAL_MANAGER" length="8"/>
  <property name="districtManager" type="string" column="DISTRICT_MANAGER" length="8"/>
  <property name="teamManager" type="string" column="TEAM_MANAGER" length="8"/>
  	 	
  	
  <!-- RELAZIONE CON FIN_SOGGETTO -->
  <many-to-one name="soggetto" class="it.ras.arco.bean.FinSoggetto" 
   		fetch="select"   			
  		column = "SOGGETTO_ID" not-found="ignore" cascade="lock" />
  
  <!-- RELAZIONE CON FIN_AGENZIA -->
  <many-to-one name="agenzia" class="it.ras.arco.bean.FinAgenzia" 
   		fetch="select"   			
  		column = "AGENZIA_ID" not-found="ignore" cascade="lock" />
  
  <!-- RELAZIONE CON FIN_AGENZIA (cpf) -->
  <many-to-one name="cpf" class="it.ras.arco.bean.FinAgenzia" column = "CPF_ID" 
   		fetch="select"   			
  		cascade="lock" not-found="ignore" />
  
  <!-- RELAZIONE CON FIN_AGENZIA (ufficio personale) -->
  <many-to-one name="ufficioPersonale" class="it.ras.arco.bean.FinAgenzia" 
   		fetch="select"   			
  		column = "UFFICIO_PERSONALE_ID" cascade="lock" not-found="ignore" />
  
  <!-- RELAZIONE CON FIN_AGENZIA (centro raccolta) -->
  <many-to-one name="centroRaccolta" class="it.ras.arco.bean.FinAgenzia" column = "CENTRO_RACCOLTA_ID" 
   		fetch="select"   			
  		cascade="lock" not-found="ignore" />
  
  <!-- RELAZIONE CON FIN_DISTRETTO -->
  <many-to-one name="distretto" class="it.ras.arco.bean.FinDistretto" 
   		fetch="select"   			
  		column = "DISTRETTO_ID" cascade="lock" not-found="ignore" />
  
  <!-- RELAZIONE CON FIN_PROMOTORE (padre) -->
  <many-to-one name="promotorePadre" class="it.ras.arco.bean.FinPromotore" 
   		fetch="select"   			
  		column = "PROMOTORE_PADRE_ID" cascade = "lock" not-found="ignore" />
  
  <!-- RELAZIONE CON FIN_PROMOTORE (figlio) -->  
  <set name="promotoreFiglio" table="FIN_PROMOTORE" cascade = "save-update,lock" inverse = "true">
   <key column="PROMOTORE_PADRE_ID"/>
   <one-to-many class="it.ras.arco.bean.FinPromotore" not-found="ignore" />
  </set>
 
 <!-- RELAZIONE CON FIN_CONTRATTO_PROMOTORE-->
  <set name="assegnazione" inverse="true" cascade="lock" >
   <key column="PROMOTORE_ID"/>
   <one-to-many class="it.ras.arco.bean.FinContrattoPromotore" not-found="ignore" />
  </set>
  
  <!-- RELAZIONE CON FIN_PROMOTORE_COORDINATA-->
  <set name="promotoreCoordinata" inverse="true" cascade="lock" >
   <key column="PROMOTORE_COORDINATA_ID"/>
   <one-to-many class="it.ras.arco.bean.FinPromotoreCoordinata" not-found="ignore" />
  </set>
  
  <!-- RELAZIONE CON FIN_SOTTOSCRIZIONE (Dal Promotore)-->
  <set name="sottoscrizioni" inverse="true">
	<key column="CODICE_PROMOTORE_ID"/>
      <one-to-many class="it.ras.arco.bean.FinSottoscrizione"/>
    </set>
<!-- RELAZIONE CON FIN_SOTTOSCRIZIONE (Dal Promotore Split)-->
  <set name="sottoscrizioniSplit" inverse="true">
	<key column="CODICE_PROM_SPLIT_ID"/>
      <one-to-many class="it.ras.arco.bean.FinSottoscrizione"/>
    </set>
    
<!-- RELAZIONE CON FIN_PRATICA -->
  <set name="pratiche" inverse="true">
	<key column="PRATICA_ID"/>
      <one-to-many class="it.ras.arco.bean.FinPratica"/>
    </set>
    
  <!-- RELAZIONE CON FIN_BONIFICO_PF, per bonifci ordinati -->
  <set name="bonificiOrdinati" inverse="true" lazy="true" cascade="lock" where ="GSTD_ESIST_B='S'">
   <key column="PROMOTORE_ID"/>
   <one-to-many class="it.ras.arco.bean.FinBonificoAdapterBase" not-found="ignore" />
  </set>      
  
  <!-- RELAZIONE CON FIN_ORDINE_TITOLO_PF, per ordini di titoli eseguiti -->
  <set name="titoliOrdinati" inverse="true" lazy="true" cascade="lock" where ="GSTD_ESIST_B='S'">
   <key column="PROMOTORE_ID"/>
   <one-to-many class="it.ras.arco.bean.FinOrdineTitolo" not-found="ignore" />
  </set>   

  <!-- RELAZIONE CON FIN_ORDINE_TITOLO_ESEGUITI_PF, per ordini di titoli eseguiti -->
  <set name="ordinatiTitoliEseguiti" inverse="true" lazy="true" cascade="lock" where ="GSTD_ESIST_B='S'">
   <key column="PROMOTORE_ID"/>
   <one-to-many class="it.ras.arco.bean.FinOrdineTitoliEseguitiAdapterBase" not-found="ignore" />
  </set>
    <!-- RELAZIONE CON WP_CLIENTE_GEN, per identificativo promotore -->
  <!--
  <set name="clienteGen" inverse="true" lazy="true" cascade="lock" where ="GSTD_ESIST_B='S'">
   <key column="PROMOTORE_ID"/>
   <one-to-many class="@CLIENTE_GEN.class@" not-found="ignore" />
  </set>
  -->
  
</class>

 <query name="GetPromotoreByCodicePromotore">from it.ras.arco.bean.FinPromotore p where p.codPromotore = ? </query>
 <query name="GetPromotoreByCodicePromotoreCodiceRete">from it.ras.arco.bean.FinPromotore p where p.codPromotore = ? and p.codRete = ? </query>
 <query name="GetPromotoreByCodicePromotoreCodiceReteCodiceCompagnia">from it.ras.arco.bean.FinPromotore p where p.codPromotore = ? and p.codRete = ? and p.codComp = ? </query>
 <query name="GetPromotoreNonAgenteByCodicePromotore">from it.ras.arco.bean.FinPromotore p where p.codPromotore = ? and p.codRete&lt;&gt;'A'</query>
 
 
 </hibernate-mapping>
  
