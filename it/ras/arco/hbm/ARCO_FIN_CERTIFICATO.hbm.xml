<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
                                   "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
<!-- TABELLA CERTIFICATO -->
	<class name="it.ras.arco.bean.FinCertificato"	table="FIN_CERTIFICATO" where="GSTD_ESIST_B='S'">
		<id name="certificatoId" column="CERTIFICATO_ID" type="integer">
			<generator class="sequence">
				<param name="sequence">FIN_CERTIFICATO_SEQ</param>
			</generator>
		</id>
		<property name="attivitaFinId"                  column="ATTIVITA_FIN_ID"                type="integer"  />
	<!--	<property name="posizioneId"                    column="POSIZIONE_ID"                   type="integer"  /> -->
		<property name="soggettoId"                     column="SOGGETTO_ID"                    type="integer"  />
		<property name="numCertificato"                 column="NUM_CERTIFICATO"                type="integer"  />
		<property name="dataComp"                       column="DATA_COMP"                      type="date"  /> 
		<property name="tpCertificato"                  column="TP_CERTIFICATO"                 type="string" length="1"  />
		<property name="giacCertificato"                column="GIAC_CERTIFICATO"               type="integer"  />
		<property name="quoteCertificate"               column="QUOTE_CERTIFICATE"              type="double"  />
		<property name="numPrestampato"                 column="NUM_PRESTAMPATO"                type="integer"  />
		<property name="codAbi"                         column="COD_ABI"                        type="string" length="5"  />
		<property name="codCab"                         column="COD_CAB"                        type="string" length="5"  />
		<property name="codiceEvidenza" 				column="COD_EVIDENZA_N"					type="integer" />
  		<property name="dataInsConEvidenza"             column="DATA_INS_COD_EVI_D"				type="timestamp"/>
		<property name="userUltimaModifica"             column="GSTD_ULT_USER_S"                type="string" length="40"  />
		<property name="proceduraUltimaModifica"        column="GSTD_ULT_PROC_S"                type="string" length="40"  />
		<property name="dataUltimaModifica"             column="GSTD_ULT_MOD_D"                 type="timestamp"  />
		<property name="dataInserimento"                column="GSTD_INSE_D"                    type="timestamp"  />
		<property name="flagEsistenza"                  column="GSTD_ESIST_B"                   type="string" length="1"  />
		<property name="utenteInserimento"              column="GSTD_USER_INS_S"                type="string" length="40"  />
		<property name="tipoUltimaModifica"             column="GSTD_TIPO_MOD_B"                type="string" length="1"  />
		<property name="codLuogoinv"                    column="COD_LUOGO_INV"                   type="string" length="3"  />
 		<property name="dataRichiesta"                  column="DATA_RICHIESTA_D"                 type="date"  /> 
 		<property name="numDispArco"                    column="NUM_DISP_ARCO"                   type="string"   />
		<property name="userUltimaModificaSlave" 		type="string" column="GSTD_ULT_USER_S" length="40" insert="false" update="false"/>
	    <property name="proceduraUltimaModificaSlave" 	type="string" column="GSTD_ULT_PROC_S" length="40" insert="false" update="false"/>
	    <property name="dataUltimaModificaSlave" 		type="timestamp" column="GSTD_ULT_MOD_D" insert="false" update="false"/>
	    <property name="tipoUltimaModificaSlave" 		type="string" column="GSTD_TIPO_MOD_B" length="1" insert="false" update="false"/>
  
  <property name="inizioValidita"                  column="INIZIO_VALIDITA_D"                 type="date"  /> 
  <property name="fineValidita"                    column="FINE_VALIDITA_D"                     type="date"  /> 
  <property name="stato"                           column="STATO_S"                                  type="string"  length="1" />
			
 		
  
  
  
  
  <!-- RELAZIONE CON FIN_POSIZIONE-->
  
  <many-to-one name="posizione" class="it.ras.arco.bean.FinPosizione" column="POSIZIONE_ID" 
 lazy="proxy" cascade="lock" not-found="ignore" />  
  
  
  <set name="ordini" lazy="true" cascade="lock" where ="GSTD_ESIST_B='S'" >
   <key column="CERTIFICATO_ID"/>
   <one-to-many class="it.ras.arco.bean.FinOrdine" not-found="ignore" />
  </set>
  
  
</class>
	<query name="GetCertificatoByNumPrestampato">from it.ras.arco.bean.FinCertificato f where f.numPrestampato = ?</query>
	<query name="GetCertificatoByNumCertQuoteDtaComp">
<!--		from it.ras.arco.bean.FinCertificato f where f.numCertificato = ? and f.dataComp = ? and f.quoteCertificate = ? -->
		from it.ras.arco.bean.FinCertificato f where f.numCertificato = ? and f.quoteCertificate = ?
	</query>
</hibernate-mapping>
